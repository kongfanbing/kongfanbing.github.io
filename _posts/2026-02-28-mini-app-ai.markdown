---
layout: post
title: 用AI一个小时完成微信小程序的开发
date: 2026-02-28
tags: [AI, 小程序]
---

> 工欲善其事，必先利其器。
>
> ——孔子

## 前言

最近一年，工作中越来越多的使用AI技术来辅助开发，从代码生成到自动化测试，再到跨语言的开发，AI的应用已经渗透到了开发的各个环节。今天，我想分享一下如何利用AI在一个小时内完成一个微信小程序的开发。

我给自己定了一个很直接的实验：

> 不看教程、不从零手写全部代码，主要依赖 AI，看看能在多长时间内把一个可用、可维护、且具备上线潜力的微信小程序做出来。

这个项目最终做成了一个「懒人便民计算器」（最初是社保计算器），核心能力是：

- 省市联动选择
- 社保/公积金缴费计算
- 自动定位城市
- 可维护的城市费率与基数数据结构

这篇是上篇，重点讲**开发过程和技术总结**。至于微信平台提审、隐私合规、权限开通的完整上线流程，准备放到下篇单独展开。

---

## 一、项目目标：不是“跑起来”，而是“能上线”

这次我刻意把目标设得更“产品化”而不是“Demo 化”：

1. 功能要真实可用，不是只有页面样式
2. 代码结构要可扩展，后续能继续加功能
3. 数据都从网上抓取，绝不动手写代码

也就是说，这不是一次“让 AI 帮我写几个函数”的体验，而是一次完整的 AI 开发实践。

---

## 二、开发过程：AI 真正帮我省了什么

### 1）先把核心业务跑通：计算逻辑 + 城市联动

我只跟AI说了一句话需求：参考某个网页做一个社保计算器的功能，结果它直接给了我一个可运行的版本：

- 页面结构（输入、选择器、结果区）
- 社保与公积金计算逻辑
- 省市二级联动和城市费率读取

这里 AI 的价值不只是“写代码快”，更重要是：

- 能在一个回合内把**数据结构 + 页面交互 + 计算逻辑**打通
- 对边界情况（空值、负值、最小基数）有默认处理
- 命名和结构基本保持一致，后续维护成本低

### 2）上线约束先行：定位功能先注释、后恢复

在准备提审时，定位权限没开通，于是先做了一个务实方案：

- 暂时注释自动定位相关逻辑
- 删除 `app.json` 中对应权限声明
- 保留默认城市兜底（北京市）

这一步很关键。很多项目失败不是因为功能写不出来，而是忽略了平台规则。

后续我又恢复了自动定位，并把接口从 `getLocation` 调整为 `getFuzzyLocation`。过程中出现过典型报错：

- `getFuzzyLocation:fail no permission`

这直接暴露出一个现实：**AI 可以帮你快速写对“代码语法”，但“平台权限状态”仍然是环境问题，必须回到微信后台配置和隐私流程。**

### 3）品牌升级：从“社保计算器”到“懒人便民计算器”

这次改名不是简单替换文案，而是为后续扩展留空间：

- 小程序标题统一调整
- 功能定位从单一社保工具升级到便民工具集合

AI 在这类改动里的优势是“全局一致性”，能快速找到所有受影响位置，减少漏改。

### 4）最花时间但也最值钱：数据从哪儿来？

这个项目的硬核工作，其实是**全国各地社保基数**，不是功能。

我先是提供了参考网页的数据来源（js地址，里面包含了离线版数据），AI才通过抓取和解析脚本完成了完整的全国各省市的筛选。然后发现这个数据是过时的， 又从网上查询出 2025 年各省/直辖市的最新社保基数上下限后，AI 协助完成了：

- 两份核心数据文件同步更新
- 先更新省会/直辖市，再补齐同规则城市
- 通过脚本批量处理，避免手工改几百条数据

最终结果：

- 主批次更新省会和直辖市
- 再次批量更新与省会同规则的城市
- 合计完成了大规模城市数据更新

这部分是我最有感触的：

> AI + 脚本化思维，能把“机械重复劳动”压缩到非常低。但是它的脑容量有限，复杂规则需要分步处理。

以前这类任务就是“人肉改配置 + 对照表格 + 不断自查”，非常容易出错、非常消耗耐心。现在把规则讲清楚，AI 可以把动作执行得又快又稳。

---

## 三、这次实践里，AI 真正强在哪

### 1）把“想法”快速翻译成“可运行代码”

很多时候，开发慢不是慢在写代码，而是慢在从需求到实现的转换。AI 在这里像一个实时结对编程伙伴：

- 你说目标，它给初版
- 你说问题，它给修复
- 你说约束，它改结构

这种往返速度，比传统“查资料-试错-重写”快很多。

### 2）擅长跨文件、跨层级的一致性改造

从 `app.json` 到页面逻辑，再到数据脚本，AI 能持续记住上下文并保持修改一致。对中小项目来说，这个能力非常实用。**对，只能是中小型项目，这一点非常重要！**

### 3）非常适合“脚本化一次性工程”

像这次数据迁移、批量替换、微信接口调用，AI 的效率远高于纯手工。尤其是：

- 可重复执行
- 可回溯
- 可自动查文档调接口

---

## 四、也必须反思：AI 不是“自动上线按钮”

夸 AI 的同时，也要讲清楚边界。

### 1）平台/权限/合规问题，AI 不能替你开通

报错 `no permission` 的根因，不在代码里，而在平台配置和审核状态里。

换句话说，AI 可以把“你该做什么”写出来，但“你是否真的有权限做”仍要你在平台侧完成。

### 2）规则说得不精确，AI 可能“看起来对、实际上偏”

AI 的理解能力很强，但它不是“全知全能”。如果规则定义不清晰，或者边界条件没说清楚，它可能会给出“看起来合理但不完全对”的结果。比如初版它只列出来不到10个的重点城市，完全没有管参考网站有全国所有省份及几百个城市。

经验很直接：

- 先定义规则
- 再让 AI 执行
- 最后抽样验证

### 3）人类开发者的角色在升级，不是在消失

AI 时代，工程师从“每行代码的搬运工”转向：

- 需求拆解者
- 规则定义者
- 结果验收者
- 风险把关者

你依然是负责人，只是把体力活交给了更高效的助手。

---

## 五、结语：一个小时，不只是“快”，而是“更敢做”

这次实验让我最大的收获，不是节省了多少敲键盘时间，而是降低了“从想法到产品”的心理门槛。

以前会担心：

- 需求多、改动大、数据杂，做起来太麻烦

现在更像是：

- 先做起来
- 用 AI 快速迭代
- 把复杂问题拆成可执行回合

当开发成本被压低，创新频率就会上来。

这大概就是这轮技术进步最迷人的地方：

> 它不只是让我们写得更快，而是让更多人有机会把想法做成真正可用的产品。

---

---

# 开发环境

_AI工具_

我一直都习惯使用VS Code作为我的开发工具，再配合Copilot（每月10美元的订阅费用），可以直接在编辑器中使用AI来生成代码和进行调试，会大大提高开发效率。

_微信开发者工具_

微信开发者工具是微信官方提供的开发环境，支持小程序的开发、调试和预览。可以从微信官方网站下载并安装。其实微信开发者工具也有AI助手，用的是混元，不过我没用过，不熟悉，所以本次开发没有使用。
下载地址：https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html
